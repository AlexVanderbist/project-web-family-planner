{"version":3,"sources":["scripts/app.js"],"names":["WeatherController","$document","$log","$timeout","OpenWeatherService","$interval","ScreenConfigService","getPercentageFromValues","val","min","max","percentage","init","debug","getTodayWeather","screenConfig","household","address","then","response","vm","weatherDescription","data","weather","main","thermometerStyle","height","temperature","getWeatherForecast","weatherForecast","list","this","time","Date","getHours","$http","svc","apiKey","location","method","url","params","q","apikey","units","TransportController","DelijnService","$window","$rootScope","$scope","_init","getNextBusses","busstop","lijnen","nextBusses","notice","nextSlide","$on","sketch","destroy","Building","Skyline","dt","skylines","colors","Sketch","create","container","document","getElementById","fullscreen","width","speed","viewHeight","formatDepartureTime","search","replace","config","reset","prototype","layer","x","y","color","slantedTop","floor","random","slantedTopHeight","slantedTopDirection","round","spireTop","spireTopWidth","spireTopHeight","antennaTop","antennaTopWidth","antennaTopHeight","render","fillStyle","strokeStyle","lineWidth","beginPath","rect","fill","stroke","moveTo","lineTo","closePath","buildings","populate","newHeight","newWidth","results","totalWidth","push","length","update","firstBuilding","lastBuilding","shift","i","save","translate","restore","setup","clear","clearRect","draw","SetupController","AppConfig","$state","checkTimer","checkScreenExists","getScreenConfig","err","cancel","screenName","name","countdownTimer","countdown","go","uiUrl","screenCode","ApiService","options","headers","PlanniScreenCode","getAvailable","get","apiUrl","getMessages","eventId","MessagesController","messages","error","routesConfig","$stateProvider","$urlRouterProvider","$locationProvider","otherwise","state","templateUrl","controller","template","redirectTo","MainController","createSlides","currentSlideId","slides","forEach","slideName","duration","slideTimeout","$inject","angular","module","run","$transitions","onStart","to","transition","trans","toState","addResolvable","token","deps","resolveFn","$q","resolve","reject","includes","service","e","t","exports","define","amd","window","n","Object","toString","call","o","r","u","C","String","fromCharCode","a","c","apply","arguments","l","s","splice","_","ee","B","S","N","I","A","R","K","U","resize","running","z","now","millis","Z","retina","autoclear","scale","V","interval","J","style","canvas","D","Y","j","v","innerHeight","innerWidth","L","getBoundingClientRect","pageX","left","scrollX","pageXOffset","pageY","top","scrollY","pageYOffset","f","element","ox","oy","dx","dy","d","preventDefault","G","originalEvent","touches","Q","$","p","M","X","indexOf","W","type","dragging","test","g","F","keyCode","H","te","m","autopause","E","k","P","T","O","parentNode","b","removeChild","devicePixelRatio","w","h","eventTarget","mouse","keys","NaN","toggle","start","stop","autostart","split","Math","body","globals","8","9","13","16","27","32","37","38","39","40","CANVAS","WEB_GL","WEBGL","DOM","instances","install","TWO_PI","PI","HALF_PI","QUARTER_PI","lerp","map","self","createElement","context","getContext","appendChild","augment","className","setTimeout","clearTimeout","callback","console","log","constant","$templateCache","put"],"mappings":"AAqDA,QAASA,mBAAkBC,EAAWC,EAAMC,EAAUC,EAAoBC,EAAWC,GAUnF,QAASC,GAAwBC,EAAKC,EAAKC,GACzC,GAAIC,IAAcH,EAAMC,IAAQC,EAAMD,GAAO,GAC7C,OAAOE,GAAa,IAGtB,QAASC,KACPV,EAAKW,MAAM,6BAGXT,EAAmBU,gBAAgBR,EAAoBS,aAAaC,UAAUC,SAC3EC,KAAK,SAAUC,GACdC,EAAGC,mBAAqBF,EAASG,KAAKC,QAAQ,GAAGC,KACjDJ,EAAGG,QAAUJ,EAASG,KAAKE,KAC3BJ,EAAGK,kBACDC,OAAQnB,EAAwBa,EAAGO,gBAAkB,OAK3DvB,EAAmBwB,mBAAmBtB,EAAoBS,aAAaC,UAAUC,SAC9EC,KAAK,SAAUC,GACdC,EAAGS,gBAAkBV,EAASG,KAAKQ,KAAK,KA9B9C,GAAIV,GAAKW,IAETX,GAAGK,kBACDC,OAAQ,MAIVN,EAAGY,MAAQ,GAAKC,OAAQC,WAAa,KAAM,GAAKD,OAAQC,WAAa,EAAI,QAAU,MA+BnFtB,IAQF,QAASR,oBAAmBF,EAAMiC,GAChC,GAAIC,GAAML,KAENM,EAAS,kCAEbD,GAAItB,gBAAkB,SAAUwB,GAC9B,MAAOH,IACLI,OAAQ,MACRC,IAAK,iDACLC,QACEC,EAAGJ,EACHK,OAAQN,EACRO,MAAO,aAKbR,EAAIR,mBAAqB,SAAUU,GACjC,MAAOH,IACLI,OAAQ,MACRC,IAAK,kDACLC,QACEC,EAAGJ,EACHK,OAAQN,EACRO,MAAO,aAUf,QAASC,qBAAoBC,EAAe5C,EAAM6C,EAASC,EAAY1C,EAAqB2C,GA6B1F,QAASC,KACPhD,EAAKW,MAAM,+BAEXiC,EAAcK,cAAc7C,EAAoBS,aAAaqC,SAASlC,KACpE,SAAyBC,GACpBA,EAASG,MAAQH,EAASG,KAAK+B,OAChCjC,EAAGkC,WAAanC,EAASG,KAAK+B,OAG9BjC,EAAGmC,OAAS,+BAGhB,SAAuBpC,GACrB6B,EAAWQ,cAGfR,EAAWS,IAAI,oBAAqBC,EAAOC,SAzC7C,GAGIC,GAAUC,EAASC,EAAIJ,EAAQK,EAAUC,EAHzC5C,EAAKW,IAIT2B,GAASO,OAAOC,QACdC,UAAWC,SAASC,eAAe,WACnCC,YAAY,EACZC,MAAO,IACP7C,OAAQ,MAEVgC,EAAOc,MAAQ,IACfd,EAAOe,WAAaf,EAAOhC,OAC3BqC,KACAD,EAAK,EACLE,GAAU,UAAW,UAAW,UAAW,UAAW,WAEtD5C,EAAGkC,cAEHlC,EAAGsD,oBAAsB,SAAU1C,GACjC,MAAKA,GAEFA,EAAK2C,OAAO,KAAc3C,EAAK4C,QAAQ,IAAK,IACnC5C,EAHM,MAwBpBkB,IAMAU,EAAW,SAAUiB,GACnB,MAAO9C,MAAK+C,MAAMD,IAEpBjB,EAASmB,UAAUD,MAAQ,SAAUD,GAenC,MAdA9C,MAAKiD,MAAQH,EAAOG,MACpBjD,KAAKkD,EAAIJ,EAAOI,EAChBlD,KAAKmD,EAAIL,EAAOK,EAChBnD,KAAKwC,MAAQM,EAAON,MACpBxC,KAAKL,OAASmD,EAAOnD,OACrBK,KAAKoD,MAAQN,EAAOM,MACpBpD,KAAKqD,WAAsC,IAAzBC,MAAMC,OAAO,EAAG,KAClCvD,KAAKwD,iBAAmBxD,KAAKwC,MAAQe,OAAO,EAAG,GAC/CvD,KAAKyD,oBAA8C,IAAxBC,MAAMH,OAAO,EAAG,IAC3CvD,KAAK2D,SAAoC,IAAzBL,MAAMC,OAAO,EAAG,KAChCvD,KAAK4D,cAAgBL,OAAoB,IAAbvD,KAAKwC,MAA2B,IAAbxC,KAAKwC,OACpDxC,KAAK6D,eAAiBN,OAAO,GAAI,IACjCvD,KAAK8D,YAAc9D,KAAK2D,UAAqC,IAAzBL,MAAMC,OAAO,EAAG,KACpDvD,KAAK+D,gBAAkB/D,KAAKiD,MAAQ,EAC7BjD,KAAKgE,iBAAmBT,OAAO,EAAG,KAE3C1B,EAASmB,UAAUiB,OAAS,WA6B1B,GA5BAtC,EAAOuC,UAAYvC,EAAOwC,YAAcnE,KAAKoD,MAC7CzB,EAAOyC,UAAY,EACnBzC,EAAO0C,YACP1C,EAAO2C,KAAKtE,KAAKkD,EAAGlD,KAAKmD,EAAGnD,KAAKwC,MAAOxC,KAAKL,QAC7CgC,EAAO4C,OACP5C,EAAO6C,SACHxE,KAAKqD,aACP1B,EAAO0C,YACP1C,EAAO8C,OAAOzE,KAAKkD,EAAGlD,KAAKmD,GAC3BxB,EAAO+C,OAAO1E,KAAKkD,EAAIlD,KAAKwC,MAAOxC,KAAKmD,GACpCnD,KAAKyD,oBACP9B,EAAO+C,OAAO1E,KAAKkD,EAAIlD,KAAKwC,MAAOxC,KAAKmD,EAAInD,KAAKwD,kBAEjD7B,EAAO+C,OAAO1E,KAAKkD,EAAGlD,KAAKmD,EAAInD,KAAKwD,kBAEtC7B,EAAOgD,YACPhD,EAAO4C,OACP5C,EAAO6C,UAELxE,KAAK2D,WACPhC,EAAO0C,YACP1C,EAAO8C,OAAOzE,KAAKkD,EAAIlD,KAAKwC,MAAQ,EAAGxC,KAAKmD,EAAInD,KAAK6D,gBACrDlC,EAAO+C,OAAO1E,KAAKkD,EAAIlD,KAAKwC,MAAQ,EAAIxC,KAAK4D,cAAe5D,KAAKmD,GACjExB,EAAO+C,OAAO1E,KAAKkD,EAAIlD,KAAKwC,MAAQ,EAAIxC,KAAK4D,cAAe5D,KAAKmD,GACjExB,EAAOgD,YACPhD,EAAO4C,OACP5C,EAAO6C,UAELxE,KAAK8D,WAKP,MAJAnC,GAAO0C,YACP1C,EAAO8C,OAAOzE,KAAKkD,EAAIlD,KAAKwC,MAAQ,EAAGxC,KAAKmD,EAAInD,KAAKgE,kBACrDrC,EAAO+C,OAAO1E,KAAKkD,EAAIlD,KAAKwC,MAAQ,EAAGxC,KAAKmD,GAC5CxB,EAAOyC,UAAYpE,KAAK+D,gBACjBpC,EAAO6C,UAGlB1C,EAAU,SAAUgB,GAelB,MAdA9C,MAAKkD,EAAI,EACTlD,KAAK4E,aACL5E,KAAKiD,MAAQH,EAAOG,MACpBjD,KAAKwC,OACH9D,IAAKoE,EAAON,MAAM9D,IAClBC,IAAKmE,EAAON,MAAM7D,KAEpBqB,KAAKL,QACHjB,IAAKoE,EAAOnD,OAAOjB,IACnBC,IAAKmE,EAAOnD,OAAOhB,KAErBqB,KAAKyC,MAAQK,EAAOL,MACpBzC,KAAKoD,MAAQN,EAAOM,MACpBpD,KAAK6E,WACE7E,MAET8B,EAAQkB,UAAU6B,SAAW,WAC3B,GAAIC,GAAWC,EAAUC,EAASC,CAGlC,KAFAA,EAAa,EACbD,KACOC,GAActD,EAAOa,MAAyB,EAAjBxC,KAAKwC,MAAM7D,KAC7CoG,EAAWrB,MAAMH,OAAOvD,KAAKwC,MAAM9D,IAAKsB,KAAKwC,MAAM7D,MACnDmG,EAAYpB,MAAMH,OAAOvD,KAAKL,OAAOjB,IAAKsB,KAAKL,OAAOhB,MACtDqB,KAAK4E,UAAUM,KAAK,GAAIrD,IACtBoB,MAAOjD,KAAKiD,MACZC,EAA6B,IAA1BlD,KAAK4E,UAAUO,OAAe,EAAInF,KAAK4E,UAAU5E,KAAK4E,UAAUO,OAAS,GAAGjC,EAAIlD,KAAK4E,UAAU5E,KAAK4E,UAAUO,OAAS,GAAG3C,MAC7HW,EAAGxB,EAAOhC,OAASmF,EACnBtC,MAAOuC,EACPpF,OAAQmF,EACR1B,MAAOpD,KAAKoD,SAEd4B,EAAQE,KAAKD,GAAcF,EAE7B,OAAOC,IAETlD,EAAQkB,UAAUoC,OAAS,WACzB,GAAIC,GAAeC,EAAcR,EAAWC,CAG5C,IAFA/E,KAAKkD,GAAKvB,EAAOc,MAAQzC,KAAKyC,MAAQV,EACtCsD,EAAgBrF,KAAK4E,UAAU,GAC3BS,EAAc7C,MAAQ6C,EAAcnC,EAAIlD,KAAKkD,EAAI,EAYnD,MAXA6B,GAAWrB,MAAMH,OAAOvD,KAAKwC,MAAM9D,IAAKsB,KAAKwC,MAAM7D,MACnDmG,EAAYpB,MAAMH,OAAOvD,KAAKL,OAAOjB,IAAKsB,KAAKL,OAAOhB,MACtD2G,EAAetF,KAAK4E,UAAU5E,KAAK4E,UAAUO,OAAS,GACtDE,EAActC,OACZE,MAAOjD,KAAKiD,MACZC,EAAGoC,EAAapC,EAAIoC,EAAa9C,MACjCW,EAAGxB,EAAOhC,OAASmF,EACnBtC,MAAOuC,EACPpF,OAAQmF,EACR1B,MAAOpD,KAAKoD,QAEPpD,KAAK4E,UAAUM,KAAKlF,KAAK4E,UAAUW,UAG9CzD,EAAQkB,UAAUiB,OAAS,WACzB,GAAIuB,EAIJ,KAHAA,EAAIxF,KAAK4E,UAAUO,OACnBxD,EAAO8D,OACP9D,EAAO+D,UAAU1F,KAAKkD,GAAIvB,EAAOhC,OAASgC,EAAOe,YAAc,GAAK1C,KAAKiD,OAClEuC,KACLxF,KAAK4E,UAAUY,GAAGvB,OAAOuB,EAE3B,OAAO7D,GAAOgE,WAEhBhE,EAAOiE,MAAQ,WACb,GAAIJ,GAAGR,CAGP,KAFAQ,EAAI,EACJR,KACOQ,KACLR,EAAQE,KAAKlD,EAASkD,KAAK,GAAIpD,IAC7BmB,MAAOuC,EAAI,EACXhD,OACE9D,IAAe,IAAT8G,EAAI,GACV7G,IAAe,IAAT6G,EAAI,IAEZ7F,QACEjB,IAAK,IAAU,GAAJ8G,EACX7G,IAAK,IAAU,GAAJ6G,GAEb/C,MAAiB,MAAT+C,EAAI,GACZpC,MAAOnB,EAAOuD,MAGlB,OAAOR,IAETrD,EAAOkE,MAAQ,WACb,MAAOlE,GAAOmE,UAAU,EAAG,EAAGnE,EAAOa,MAAOb,EAAOhC,SAErDgC,EAAOyD,OAAS,WACd,GAAII,GAAGR,CAKP,KAJAjD,EAAKJ,EAAOI,GAAK,GAAM,GAAMJ,EAAOI,GAAK,GACzCA,EAAKA,EAAK,EAAI,EAAIA,EAClByD,EAAIxD,EAASmD,OACbH,KACOQ,KACLR,EAAQE,KAAKlD,EAASwD,GAAGJ,OAAOI,GAElC,OAAOR,IAETrD,EAAOoE,KAAO,WACZ,GAAIP,GAAGR,CAGP,KAFAQ,EAAIxD,EAASmD,OACbH,KACOQ,KACLR,EAAQE,KAAKlD,EAASwD,GAAGvB,OAAOuB,GAElC,OAAOR,IAUX,QAASjE,eAAcX,GACrBJ,KAAKoB,cAAgB,SAAUC,GAC7B,MAAOjB,IACLI,OAAQ,MACRC,IAAK,mEAAmEY,EAAQ,SAStF,QAAS2E,iBAAgB7H,EAAM8H,EAAW1H,EAAqBD,EAAW4H,GAYxE,QAASrH,KACPV,EAAKW,MAAM,2BAEXqH,EAAa7H,EAAU8H,EAAmB,KAG5C,QAASA,KACP7H,EAAoB8H,gBAAgB,SAASC,EAAKxD,GAC7CA,IACDxE,EAAUiI,OAAOJ,GACjB9G,EAAGmH,WAAa1D,EAAO2D,KACvBC,EAAiBpI,EAAU,WACtBe,EAAGsH,WAAa,IACjBrI,EAAUiI,OAAOG,GACjBR,EAAOU,GAAG,QAEZvH,EAAGsH,aACF,QA5BT,GAAItH,GAAKW,IAGTX,GAAGwH,MAAQZ,EAAUY,MACrBxH,EAAGyH,WAAavI,EAAoBuI,WACpCzH,EAAGmH,WAAa,KAChBnH,EAAGsH,UAAY,EAEf,IAAIR,GACAO,CAuBJ7H,KAQF,QAASkI,YAAW3G,EAAOjC,EAAMI,EAAqB0H,GACpD,GAAI5F,GAAML,IAEV,MAAMgH,IACJC,SACEC,iBAAoB3I,EAAoBuI,YAI5CzG,GAAI8G,aAAe,WACjB,MAAO/G,GAAMgH,IAAInB,EAAUoB,OAAS,YAAaL,IAGnD3G,EAAIiH,YAAc,SAAUC,GAC1B,MAAOnH,GAAMgH,IAAInB,EAAUoB,OAAS,WAAYL,IAGlD3G,EAAIgG,gBAAkB,WACpB,MAAOjG,GAAMgH,IAAInB,EAAUoB,OAAS,SAAUL,IASlD,QAASQ,oBAAmBrJ,EAAM4I,EAAY9F,GAM5C,QAASE,KACPhD,EAAKW,MAAM,8BAEXiI,EAAWO,cAAcnI,KACvB,SAAkBC,GAEXA,EAASG,KAAK4F,QAAQlE,EAAWQ,YACtCpC,EAAGoI,SAAWrI,EAASG,MAEzB,SAAiBH,GACfjB,EAAKuJ,MAAM,2BAA4BtI,GACvC6B,EAAWQ,cAfjB,GAAIpC,GAAKW,IAETX,GAAGoI,YAiBHtG,IAsCF,QAASwG,cAAaC,EAAgBC,EAAoBC,GAExDD,EAAmBE,UAAU,YAE7BH,EACGI,MAAM,SACLvH,IAAK,SACLwH,YAAa,uBACbC,WAAY,6BAEbF,MAAM,OACLvH,IAAK,IACL0H,SAAU,aACVC,WAAY,cACZF,WAAY,2BAEbF,MAAM,eACLvH,IAAK,UACLwH,YAAa,2BACbC,WAAY,iCAEbF,MAAM,iBACLvH,IAAK,YACLwH,YAAa,+BACbC,WAAY,qCAEbF,MAAM,gBACLvH,IAAK,WACLwH,YAAa,6BACbC,WAAY,mCASlB,QAASG,gBAAejK,EAAU8H,EAAQ/H,EAAM8C,EAAY8F,GAsC1D,QAAS5F,KACPhD,EAAKW,MAAM,0BAEXiI,EAAWI,eAAehI,KAAK,SAAUC,GACvC6B,EAAWqH,aAAalJ,GACxB6B,EAAWQ,cAxCfR,EAAWsH,eAAiB,EAC5BtH,EAAWuH,UAEXvH,EAAWqH,aAAe,SAAUlJ,GAClC6B,EAAWuH,UACRpJ,EAASG,KAAK4F,QACf/F,EAASG,KAAKkJ,QAAQ,SAASC,GAC7BzH,EAAWuH,OAAOtD,MAChBuB,KAAMiC,EACNC,SAAU,SAMlB1H,EAAWQ,UAAY,WAGrBsF,EAAWI,eAAehI,KAAK8B,EAAWqH,cAGvCrH,EAAWuH,OAAOrD,QAGnBlE,EAAWsH,eAAkBtH,EAAWsH,eAAiB,GAAKtH,EAAWuH,OAAOrD,OAAS,EAAIlE,EAAWsH,eAAiB,EAEzHrC,EAAOU,GAAG,OAAS3F,EAAWuH,OAAOvH,EAAWsH,gBAAgB9B,MAChErI,EAASmI,OAAOtF,EAAW2H,cAC3B3H,EAAW2H,aAAexK,EAAS6C,EAAWQ,UAAWR,EAAWuH,OAAOvH,EAAWsH,gBAAgBI,YAEtGvK,EAASmI,OAAOtF,EAAW2H,cAC3B3H,EAAW2H,aAAexK,EAAS6C,EAAWQ,UAAW,OAY7DN,IAxkBFlD,kBAAkB4K,SAAW,YAAa,OAAQ,WAAY,qBAAsB,YAAa,uBACjGxK,mBAAmBwK,SAAW,OAAQ,SACtC7C,gBAAgB6C,SAAW,OAAQ,YAAa,sBAAuB,YAAa,UACpFlB,aAAakB,SAAW,iBAAkB,qBAAsB,qBAChER,eAAeQ,SAAW,WAAY,SAAU,OAAQ,aAAc,cACtE/H,oBAAoB+H,SAAW,gBAAiB,OAAQ,UAAW,aAAc,sBAAuB,UACxG9H,cAAc8H,SAAW,SACzB9B,WAAW8B,SAAW,QAAS,OAAQ,sBAAuB,aAC9DrB,mBAAmBqB,SAAW,OAAQ,aAAc,cATpDC,QACGC,OAAO,OAAQ,cAEfC,KAAA,sBAAA,aAAA,aAAA,SAAA,eAAI,SAAUzK,EAAqBwI,EAAY9F,EAAYiF,EAAQ+C,GAKlEA,EAAaC,SAASC,GAAI,SAAU,SAAUC,GAC5C7K,EAAoB8H,gBAAgB,SAASC,EAAKxD,GAChD,OAAGA,MAQPmG,EAAaC,WAAY,SAAUG,GACjC,GAAIC,GAAUD,EAAMF,IACpBE,GAAME,eACJC,MAAO,eACPC,MAAO,SAAU,sBAAuB,MACxCC,UAAW,SAAUxD,EAAQ3H,EAAqBoL,GAChD,MAAO,IAAIA,GAAG,SAASC,EAASC,GAE9BtL,EAAoB8H,gBAAgB,SAAUC,EAAKxD,GAE7CwD,IAASgD,EAAQ7C,KAAKqD,SAAS,UACjC5D,EAAOU,GAAG,SACViD,KAEAD,IAGE9G,GAAUwG,EAAQ7C,KAAKqD,SAAS,UAClC5D,EAAOU,GAAG,OACViD,KAEAD,gBAUhBd,QAAQC,OAAO,OACZb,WAAW,oBAAqBjK,mBA6CnC6K,QACGC,OAAO,OACPgB,QAAQ,qBAAsB1L,oBAiCjCyK,QAAQC,OAAO,OACZb,WAAW,sBAAuBpH,qBAkOrCgI,QAAQC,OAAO,OACZgB,QAAQ,gBAAiBhJ,eAY5B+H,QAAQC,OAAO,OACZb,WAAW,kBAAmBlC,iBAuCjC8C,QACGC,OAAO,OACPgB,QAAQ,aAAchD,YA0BzB+B,QAAQC,OAAO,OACZb,WAAW,qBAAsBV;CA6BnC,SAASwC,EAAEC,GAAG,gBAAiBC,SAAQnB,OAAOmB,QAAQD,EAAED,EAAEA,EAAE3H,UAAU,kBAAmB8H,SAAQA,OAAOC,IAAID,OAAO,WAAW,MAAOF,GAAED,EAAEA,EAAE3H,YAAY2H,EAAE9H,OAAO+H,EAAED,EAAEA,EAAE3H,WAAW,mBAAoBgI,QAAOA,OAAOrK,KAAK,SAASgK,EAAEC,GAAG,YAAa,SAASK,GAAEN,GAAG,MAAM,kBAAkBO,OAAOvH,UAAUwH,SAASC,KAAKT,GAAG,QAASU,GAAEV,GAAG,MAAM,kBAAmBA,GAAE,QAASW,GAAEX,GAAG,MAAM,gBAAiBA,GAAE,QAASxE,GAAEwE,GAAG,MAAM,gBAAiBA,GAAE,QAASY,GAAEZ,GAAG,MAAOa,GAAEb,IAAIc,OAAOC,aAAaf,GAAG,QAASgB,GAAEhB,EAAEC,EAAEK,GAAG,IAAI,GAAII,KAAKT,IAAGK,GAAGI,IAAKV,KAAIA,EAAEU,GAAGT,EAAES,GAAI,OAAOV,GAAE,QAASiB,GAAEjB,EAAEC,GAAG,MAAO,YAAWD,EAAEkB,MAAMjB,EAAEkB,YAAY,QAASC,GAAEpB,GAAG,GAAIC,KAAK,KAAI,GAAIK,KAAKN,GAAE,oBAAoBM,GAAG,oBAAoBA,IAAII,EAAEV,EAAEM,IAAIL,EAAEK,GAAGW,EAAEjB,EAAEM,GAAGN,GAAGC,EAAEK,GAAGN,EAAEM,GAAI,OAAOL,GAAE,QAASoB,GAAErB,GAAG,QAASC,GAAEA,GAAGS,EAAET,IAAIA,EAAEiB,MAAMlB,KAAKsB,OAAOb,KAAKU,UAAU,IAAI,QAASb,GAAEN,GAAG,IAAIuB,EAAE,EAAEA,EAAEC,GAAGrG,OAAOoG,IAAIE,EAAED,GAAGD,GAAG/F,EAAEiG,GAAGC,GAAG1B,EAAE,MAAM,UAAU,iBAAiBS,KAAKiB,EAAED,EAAEE,GAAE,GAAIjB,EAAEe,GAAGE,EAAEF,EAAEC,EAAED,EAAE,QAASd,KAAIiB,EAAEC,GAAGA,EAAEC,EAAEnB,GAAGoB,IAAI9B,EAAED,EAAEpE,OAAOmG,EAAErB,EAAEV,EAAEpE,QAAQoG,IAAI/B,EAAED,EAAEiC,QAAQD,EAAEtB,EAAEV,EAAEiC,SAASjC,EAAEkC,UAAUvL,IAAIqJ,EAAEjI,IAAIoK,GAAG,GAAIjM,OAAM8J,EAAEoC,IAAIpC,EAAEqC,QAAQrC,EAAEjI,GAAGiI,EAAEoC,IAAID,EAAElC,EAAED,EAAE5E,QAAQkH,IAAItC,EAAEuC,SAASvC,EAAEvE,OAAOuE,EAAEwC,WAAWxC,EAAEyC,MAAMC,EAAEA,IAAI1C,EAAEwC,WAAWxC,EAAEnE,SAASoE,EAAED,EAAEjE,MAAMuG,GAAGtC,EAAEuC,QAAQvC,EAAErE,WAAWhF,IAAIA,EAAEqJ,EAAE2C,SAAS,QAAS1B,KAAIS,EAAEkB,EAAE5C,EAAE6C,MAAM7C,EAAE8C,OAAOC,EAAEH,EAAE,KAAK,GAAGI,EAAEhD,EAAExH,MAAMyK,EAAEjD,EAAErK,OAAOqK,EAAEzH,aAAa0K,EAAEjD,EAAErK,OAAOuN,EAAEC,YAAYH,EAAEhD,EAAExH,MAAM0K,EAAEE,YAAYpD,EAAEuC,QAAQD,GAAGI,IAAIhB,EAAEmB,MAAMlN,OAAOsN,EAAE,KAAKvB,EAAEmB,MAAMrK,MAAMwK,EAAE,KAAKA,GAAGN,EAAEO,GAAGP,GAAGhB,EAAE/L,SAASsN,IAAIvB,EAAE/L,OAAOsN,EAAEF,GAAGrB,EAAElJ,QAAQwK,IAAItB,EAAElJ,MAAMwK,EAAED,GAAGT,IAAItC,EAAEwC,WAAWxC,EAAEuC,QAAQvC,EAAEyC,MAAMC,EAAEA,GAAGX,GAAG9B,EAAED,EAAEiC,QAAQ,QAASZ,GAAErB,EAAEC,GAAG,MAAOoD,GAAEpD,EAAEqD,wBAAwBtD,EAAE9G,EAAE8G,EAAEuD,MAAMF,EAAEG,MAAMN,EAAEO,SAASP,EAAEQ,aAAa1D,EAAE7G,EAAE6G,EAAE2D,MAAMN,EAAEO,KAAKV,EAAEW,SAASX,EAAEY,aAAa9D,EAAE,QAAS+D,GAAE9D,EAAEK,GAAG,MAAOe,GAAEpB,EAAED,EAAEgE,SAAS1D,EAAEA,MAAMA,EAAE2D,GAAG3D,EAAEpH,GAAG+G,EAAE/G,EAAEoH,EAAE4D,GAAG5D,EAAEnH,GAAG8G,EAAE9G,EAAEmH,EAAEpH,EAAE+G,EAAE/G,EAAEoH,EAAEnH,EAAE8G,EAAE9G,EAAEmH,EAAE6D,GAAG7D,EAAEpH,EAAEoH,EAAE2D,GAAG3D,EAAE8D,GAAG9D,EAAEnH,EAAEmH,EAAE4D,GAAG5D,EAAE,QAAS+D,GAAErE,GAAG,GAAGA,EAAEsE,iBAAiBC,EAAEnD,EAAEpB,GAAGuE,EAAEC,cAAcxE,EAAEuE,EAAEE,QAAQ,IAAIC,EAAEvJ,OAAOoJ,EAAEE,QAAQtJ,OAAOoG,EAAE,EAAEA,EAAEgD,EAAEE,QAAQtJ,OAAOoG,IAAImD,EAAEnD,GAAGwC,EAAEQ,EAAEE,QAAQlD,GAAGmD,EAAEnD,QAASmD,GAAEvJ,OAAO,EAAEuJ,EAAE,GAAGX,EAAEQ,EAAEI,EAAG,OAAO3D,GAAE2D,EAAED,EAAE,IAAG,GAAIH,EAAE,QAASK,GAAEtE,GAAG,IAAIA,EAAE+D,EAAE/D,GAAGuE,GAAGC,EAAEtD,GAAGuD,QAAQC,EAAE1E,EAAE2E,OAAO,EAAEjF,EAAEkF,WAAW,aAAaC,KAAKH,KAAK,SAASG,KAAKH,IAAIhF,EAAEkF,SAASL,GAAGrJ,EAAEgG,GAAGqD,IAAI5E,EAAED,EAAEwB,GAAGqD,MAAMvE,GAAG9E,EAAEgG,GAAGsD,IAAI7E,EAAED,EAAEwB,GAAGsD,MAAMxE,GAAGuE,EAAE,EAAE,QAASO,GAAE9E,GAAG+E,EAAE/E,EAAEgF,QAAQC,EAAE,SAASjF,EAAE2E,KAAKO,GAAGH,GAAGG,GAAG5E,EAAEyE,KAAKE,EAAEtF,EAAED,EAAEM,EAAE2E,MAAM3E,GAAG,QAASmF,GAAEnF,GAAGN,EAAE0F,YAAY,QAAQpF,EAAE2E,KAAKU,EAAExM,KAAK8G,EAAED,EAAEM,EAAE2E,MAAM3E,GAAG,QAASnH,KAAI6G,EAAEoC,KAAK,GAAIlM,MAAK8J,EAAEkC,SAAQ,EAAG,QAASyD,KAAI3F,EAAEkC,SAAQ,EAAG,QAAS0D,MAAK5F,EAAEkC,QAAQyD,EAAExM,KAAK,QAAS0M,KAAIvD,GAAGtC,EAAElE,UAAU,EAAE,EAAEkE,EAAExH,MAAMkK,EAAE1C,EAAErK,OAAO+M,GAAG,QAASoD,KAAIC,EAAE/F,EAAEgE,QAAQgC,WAAWzE,EAAE0E,EAAElB,QAAQ/E,GAAG+F,GAAGA,EAAEG,YAAYlG,EAAEgE,UAAUzC,GAAG0E,EAAE3E,OAAOC,EAAE,GAAGjB,GAAE,GAAIqF,IAAI,GAAI9D,GAAEF,EAAED,EAAEqE,EAAE1C,EAAE9B,EAAEwB,EAAEZ,EAAEV,EAAE8C,EAAES,EAAEK,EAAEE,EAAEV,EAAEC,EAAE9B,EAAEC,EAAEtM,EAAE,EAAE+N,KAAK1C,GAAE,EAAGD,GAAE,EAAGW,EAAEQ,EAAEiD,kBAAkB,EAAEvD,EAAE5C,EAAEiF,MAAMmB,EAAE9D,EAAEtC,EAAEiF,MAAMoB,EAAE1B,GAAGzL,EAAE,EAAEC,EAAE,EAAE8K,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,GAAG5C,IAAIxB,EAAEsG,aAAatG,EAAEgE,QAAQY,EAAE,YAAY,aAAaA,EAAE,YAAY,YAAYA,EAAE,UAAU,WAAWA,EAAE,QAAQA,EAAE,WAAWA,EAAE,YAAY1L,EAAEkM,EAAE,UAAU,QAAQlC,EAAEuC,EAAE,QAAQ,OAAOxE,EAAE,UAAUuE,KAAM,KAAIH,IAAKxE,GAAE2E,GAAG3E,EAAEwE,KAAI,CAAG,OAAOrE,GAAEhB,GAAGyE,QAAQC,EAAE6B,MAAM5B,EAAE6B,KAAKhB,GAAGN,UAAS,EAAGhD,SAAQ,EAAGG,OAAO,EAAED,IAAIqE,IAAI1O,GAAG0O,IAAI7O,QAAQkO,EAAEY,OAAOd,EAAE/J,MAAMgK,EAAEc,MAAMxN,EAAEyN,KAAKjB,IAAIM,EAAE/K,KAAK8E,GAAGA,EAAE6G,WAAW1N,IAAImH,GAAE,GAAIW,IAAIN,IAAIX,EAAE,IAAI,GAAI+D,GAAEM,EAAEO,EAAE,0HAA0HkC,MAAM,KAAK1B,EAAE,cAAcK,EAAEsB,KAAKV,EAAE,SAASlN,EAAE,QAAQiN,EAAE,MAAMlN,EAAE+G,EAAEiD,EAAElD,EAAEiG,KAAKN,GAAGpN,YAAW,EAAGsO,WAAU,EAAGrE,WAAU,EAAGkD,WAAU,EAAGtN,UAAUc,EAAE8N,KAAKrE,SAAS,EAAEsE,SAAQ,EAAG1E,QAAO,EAAG0C,KAAKoB,GAAGxF,GAAGqG,EAAE,YAAYC,EAAE,MAAMC,GAAG,QAAQC,GAAG,QAAQC,GAAG,SAASC,GAAG,QAAQC,GAAG,OAAOC,GAAG,KAAKC,GAAG,QAAQC,GAAG,QAAQ/B,GAAGgC,OAAOvB,EAAEwB,OAAO1O,EAAE2O,MAAM3O,EAAE4O,IAAI3B,EAAE4B,UAAU/B,EAAEgC,QAAQ,SAASjI,GAAG,IAAIA,EAAEoF,GAAG,CAAC,IAAI,GAAInF,GAAE,EAAEA,EAAE2E,EAAEzJ,OAAO8E,IAAID,EAAE4E,EAAE3E,IAAIwF,EAAEb,EAAE3E,GAAIe,GAAEhB,GAAGkI,OAAO,EAAEzC,EAAE0C,GAAGC,QAAQ3C,EAAE0C,GAAG,EAAEE,WAAW5C,EAAE0C,GAAG,EAAE5O,OAAO,SAASyG,EAAEC,GAAG,MAAOK,GAAEN,GAAGA,KAAKyF,EAAElM,SAASyG,EAAE7E,UAAUwF,EAAEV,KAAKA,EAAED,GAAG,EAAEA,EAAE,GAAGA,EAAEyF,EAAElM,UAAU0G,EAAED,KAAKsI,KAAK,SAAStI,EAAEC,EAAEK,GAAG,MAAON,GAAEM,GAAGL,EAAED,IAAIuI,IAAI,SAASvI,EAAEC,EAAEK,EAAEI,EAAEC,GAAG,OAAOX,EAAEC,IAAIK,EAAEL,IAAIU,EAAED,GAAGA,KAAKV,EAAEoF,IAAG,IAAKjN,OAAO,SAAS6H,GAAG,MAAOA,GAAEgB,EAAEhB,MAAM2F,GAAG3F,EAAEiH,SAASrB,EAAEqC,QAAQO,MAAMzE,EAAE/D,EAAEgE,QAAQhE,EAAEgE,SAAS9K,EAAEuP,cAAczI,EAAEiF,OAAOmB,EAAE,MAAM,UAAU/B,EAAErE,EAAE0I,QAAQ1I,EAAE0I,SAAS,WAAW,OAAO1I,EAAEiF,MAAM,IAAKoB,GAAE,MAAOtC,GAAE4E,WAAW,KAAK3I,EAAG,KAAK7G,GAAE,MAAO4K,GAAE4E,WAAW,QAAQ3I,IAAI+D,EAAE4E,WAAW,qBAAqB3I,EAAG,KAAKoG,GAAE,MAAOrC,GAAEjB,OAAOiB,OAAO/D,EAAE5H,WAAWc,EAAE8N,MAAM4B,YAAY7E,GAAG6B,EAAEiD,QAAQxE,EAAErE,IAAI6I,QAAQ,SAAS7I,EAAEC,GAAG,MAAOA,GAAEe,EAAEf,MAAM0F,GAAG1F,EAAE+D,QAAQhE,EAAE8C,QAAQ9C,EAAEC,EAAE+D,QAAQ8E,WAAW,UAAU9H,EAAEhB,EAAEC,GAAE,GAAIoB,EAAErB,KAAK6F,GAAG,KAAK,MAAM,SAAS,KAAKC,EAAE0C,KAAK3G,EAAE,EAAEF,EAAE,iBAAiBD,EAAE,UAAUC,EAAEoE,EAAE,SAASpE,EAAEG,EAAEgE,EAAEpE,GAAGE,EAAEkE,EAAEC,GAAG1C,EAAE,EAAEA,EAAEwC,EAAE1K,SAAS2G,EAAEuB,IAAIvB,EAAEgE,EAAED,EAAExC,GAAG,UAAU1B,GAAGC,EAAEkE,EAAED,EAAExC,GAAG,SAAS1B,EAAG,OAAOmE,GAAEpE,GAAGI,EAAEA,GAAG,SAAS9B,GAAG,GAAIC,IAAG,GAAI/J,MAAKoK,EAAEmF,EAAE9Q,IAAI,EAAE,IAAIsL,EAAE4B,IAAInB,EAAEqI,WAAW,WAAW/I,EAAEC,EAAEK,IAAIA,EAAG,OAAOuB,GAAE5B,EAAEK,EAAEI,GAAGoF,EAAEC,GAAGnE,EAAEA,GAAG,SAAS5B,GAAGgJ,aAAahJ,IAAI4F,IAClnJ9G,QACGC,OAAO,OACPgB,QAAQ,uBAAA,QAAA,YAAuB,SAAU3J,EAAO6F,GAC/C,GAAI5F,GAAML,IAEVK,GAAIyG,WAAa,SACjBzG,EAAIrB,aAAe,IAEnB,MAAMgI,IACJC,SACEC,iBAAoB7G,EAAIyG,YAI5BzG,GAAIgG,gBAAkB,SAAU4M,GAC9B,MAAG5S,GAAIrB,aAAqBiU,EAAS,KAAM5S,EAAIrB,kBAE/CoB,GAAMgH,IAAInB,EAAUoB,OAAS,SAAUL,GAAS7H,KAAK,SAAmBC,GACtEiB,EAAIrB,aAAeI,EAASG,KAC5B2T,QAAQC,IAAI9S,EAAIrB,cAChBiU,EAAS,KAAM5S,EAAIrB,eAClB,SAAiBI,GAClB6T,EAAS7T,SAKjB0J,QACGC,OAAO,OACPjG,OAAO6E,cAoCVmB,QACGC,OAAO,OACPb,WAAW,iBAAkBG,gBAoDhCS,QACGC,OAAO,OACPqK,SAAS,aACR/L,OAAQ,4DACRR,MAAO,0BAGXiC,QAAQC,OAAO,OAAOC,KAAK,iBAAkB,SAASqK,GAAiBA,EAAeC,IAAI,yBAAyB,uBACnHD,EAAeC,IAAI,6BAA6B,0TAChDD,EAAeC,IAAI,uBAAuB,wmBAC1CD,EAAeC,IAAI,+BAA+B,00BAClDD,EAAeC,IAAI,2BAA2B","file":"../../scripts/app-127c0d023f.js","sourcesContent":["angular\n  .module('app', ['ui.router'])\n\n  .run(function (ScreenConfigService, ApiService, $rootScope, $state, $transitions) {\n\n    /**\n     * Dont allow setup route when screen already exists\n     */\n    $transitions.onStart({to: 'setup'}, function (transition) {\n      ScreenConfigService.getScreenConfig(function(err, config) {\n        if(config) return false;\n        return true;\n      });\n    });\n\n    /**\n     * Redirect to setup when screen is not registered yet\n     */\n    $transitions.onStart({}, function (trans) { // on any app route , do the following...\n      var toState = trans.to();\n      trans.addResolvable({\n        token: 'screenConfig', // the token can be anything, here, we never actually use it in this specific case\n        deps: ['$state', 'ScreenConfigService', '$q'], // inject what I need\n        resolveFn: function ($state, ScreenConfigService, $q) {\n          return new $q(function(resolve, reject) { // make sure this is a promise, in order to delay the route\n\n            ScreenConfigService.getScreenConfig(function (err, config) {\n              // If the screen is not registered -> redirect to setup\n              if (err && ! toState.name.includes('setup')) {\n                $state.go('setup');\n                reject();\n              } else {\n                resolve();\n              }\n\n              if (config && toState.name.includes('setup')) {\n                $state.go('app');\n                reject();\n              } else {\n                resolve();\n              }\n            });\n          })\n        }\n      });\n    });\n\n  })\n\nangular.module('app')\n  .controller('WeatherController', WeatherController);\n\n/** @ngInject */\nfunction WeatherController($document, $log, $timeout, OpenWeatherService, $interval, ScreenConfigService) {\n  var vm = this;\n\n  vm.thermometerStyle = {\n    height: '0%'\n  };\n\n  // Set time to day or night\n  vm.time = ((new Date()).getHours() > 20 || (new Date()).getHours() < 8 ? 'night' : 'day');\n\n  function getPercentageFromValues(val, min, max) {\n    var percentage = (val - min) / (max - min) * 100;\n    return percentage + '%';\n  }\n\n  function init() {\n    $log.debug(\"WeatherController loaded.\");\n\n    // Load todays weather\n    OpenWeatherService.getTodayWeather(ScreenConfigService.screenConfig.household.address)\n      .then(function (response) {\n        vm.weatherDescription = response.data.weather[0].main;\n        vm.weather = response.data.main;\n        vm.thermometerStyle = {\n          height: getPercentageFromValues(vm.temperature, -10, 35)\n        };\n      });\n\n    // Load tomorrows weather\n    OpenWeatherService.getWeatherForecast(ScreenConfigService.screenConfig.household.address)\n      .then(function (response) {\n        vm.weatherForecast = response.data.list[3];\n      });\n\n    // $interval(function () {\n    //   vm.time = (vm.time === 'day' ? 'night' : 'day');\n    // }, 5000);\n  }\n\n  init();\n}\n\nangular\n  .module('app')\n  .service('OpenWeatherService', OpenWeatherService);\n\n/** @ngInject */\nfunction OpenWeatherService($log, $http) {\n  var svc = this;\n\n  var apiKey = '5e82f8d95dafe191dfa259b75be0520c';\n\n  svc.getTodayWeather = function (location) {\n    return $http({\n      method: 'GET',\n      url: 'http://api.openweathermap.org/data/2.5/weather',\n      params: {\n        q: location,\n        apikey: apiKey,\n        units: 'metric'\n      }\n    });\n  };\n\n  svc.getWeatherForecast = function (location) {\n    return $http({\n      method: 'GET',\n      url: 'http://api.openweathermap.org/data/2.5/forecast',\n      params: {\n        q: location,\n        apikey: apiKey,\n        units: 'metric'\n      }\n    });\n  };\n}\n\nangular.module('app')\n  .controller('TransportController', TransportController);\n\n/** @NgInject */\nfunction TransportController(DelijnService, $log, $window, $rootScope, ScreenConfigService, $scope) {\n\n  // TODO: Preload the bus schedule before changing to slide\n\n  var vm = this;\n\n  // sketch stuff\n  var Building, Skyline, dt, sketch, skylines, colors;\n  sketch = Sketch.create({\n    container: document.getElementById('city-bg'),\n    fullscreen: false,\n    width: 800,\n    height: 400\n  });\n  sketch.speed = 120;\n  sketch.viewHeight = sketch.height;\n  skylines = [];\n  dt = 1;\n  colors = ['#e2e9f1', '#bdceea', '#96b3d3', '#839fc4', '#3e617f'];\n\n  vm.nextBusses = [];\n\n  vm.formatDepartureTime = function (time) {\n    if(! time) return null;\n\n    if(time.search('\\'')) return time.replace('\\'','');\n    else return time;\n  };\n\n  function _init() {\n    $log.debug('TransportController loaded!');\n\n    DelijnService.getNextBusses(ScreenConfigService.screenConfig.busstop).then(\n      function successResponse(response) {\n        if(response.data && response.data.lijnen) {\n          vm.nextBusses = response.data.lijnen;\n        } else {\n          // $rootScope.nextSlide();\n          vm.notice = \"No busses driving right now\";\n        }\n      },\n      function errorResponse(response) {\n        $rootScope.nextSlide();\n      });\n\n    $rootScope.$on('$stateChangeStart', sketch.destroy);\n  }\n  _init();\n\n\n  // TODO: Move sketch stuff for bg to a directive\n\n\n  Building = function (config) {\n    return this.reset(config);\n  };\n  Building.prototype.reset = function (config) {\n    this.layer = config.layer;\n    this.x = config.x;\n    this.y = config.y;\n    this.width = config.width;\n    this.height = config.height;\n    this.color = config.color;\n    this.slantedTop = floor(random(0, 10)) === 0;\n    this.slantedTopHeight = this.width / random(2, 4);\n    this.slantedTopDirection = round(random(0, 1)) === 0;\n    this.spireTop = floor(random(0, 15)) === 0;\n    this.spireTopWidth = random(this.width * 0.01, this.width * 0.07);\n    this.spireTopHeight = random(10, 20);\n    this.antennaTop = !this.spireTop && floor(random(0, 10)) === 0;\n    this.antennaTopWidth = this.layer / 2;\n    return this.antennaTopHeight = random(5, 20);\n  };\n  Building.prototype.render = function () {\n    sketch.fillStyle = sketch.strokeStyle = this.color;\n    sketch.lineWidth = 2;\n    sketch.beginPath();\n    sketch.rect(this.x, this.y, this.width, this.height);\n    sketch.fill();\n    sketch.stroke();\n    if (this.slantedTop) {\n      sketch.beginPath();\n      sketch.moveTo(this.x, this.y);\n      sketch.lineTo(this.x + this.width, this.y);\n      if (this.slantedTopDirection) {\n        sketch.lineTo(this.x + this.width, this.y - this.slantedTopHeight);\n      } else {\n        sketch.lineTo(this.x, this.y - this.slantedTopHeight);\n      }\n      sketch.closePath();\n      sketch.fill();\n      sketch.stroke();\n    }\n    if (this.spireTop) {\n      sketch.beginPath();\n      sketch.moveTo(this.x + this.width / 2, this.y - this.spireTopHeight);\n      sketch.lineTo(this.x + this.width / 2 + this.spireTopWidth, this.y);\n      sketch.lineTo(this.x + this.width / 2 - this.spireTopWidth, this.y);\n      sketch.closePath();\n      sketch.fill();\n      sketch.stroke();\n    }\n    if (this.antennaTop) {\n      sketch.beginPath();\n      sketch.moveTo(this.x + this.width / 2, this.y - this.antennaTopHeight);\n      sketch.lineTo(this.x + this.width / 2, this.y);\n      sketch.lineWidth = this.antennaTopWidth;\n      return sketch.stroke();\n    }\n  };\n  Skyline = function (config) {\n    this.x = 0;\n    this.buildings = [];\n    this.layer = config.layer;\n    this.width = {\n      min: config.width.min,\n      max: config.width.max\n    };\n    this.height = {\n      min: config.height.min,\n      max: config.height.max\n    };\n    this.speed = config.speed;\n    this.color = config.color;\n    this.populate();\n    return this;\n  };\n  Skyline.prototype.populate = function () {\n    var newHeight, newWidth, results, totalWidth;\n    totalWidth = 0;\n    results = [];\n    while (totalWidth <= sketch.width + this.width.max * 2) {\n      newWidth = round(random(this.width.min, this.width.max));\n      newHeight = round(random(this.height.min, this.height.max));\n      this.buildings.push(new Building({\n        layer: this.layer,\n        x: this.buildings.length === 0 ? 0 : this.buildings[this.buildings.length - 1].x + this.buildings[this.buildings.length - 1].width,\n        y: sketch.height - newHeight,\n        width: newWidth,\n        height: newHeight,\n        color: this.color\n      }));\n      results.push(totalWidth += newWidth);\n    }\n    return results;\n  };\n  Skyline.prototype.update = function () {\n    var firstBuilding, lastBuilding, newHeight, newWidth;\n    this.x -= sketch.speed * this.speed * dt;\n    firstBuilding = this.buildings[0];\n    if (firstBuilding.width + firstBuilding.x + this.x < 0) {\n      newWidth = round(random(this.width.min, this.width.max));\n      newHeight = round(random(this.height.min, this.height.max));\n      lastBuilding = this.buildings[this.buildings.length - 1];\n      firstBuilding.reset({\n        layer: this.layer,\n        x: lastBuilding.x + lastBuilding.width,\n        y: sketch.height - newHeight,\n        width: newWidth,\n        height: newHeight,\n        color: this.color\n      });\n      return this.buildings.push(this.buildings.shift());\n    }\n  };\n  Skyline.prototype.render = function () {\n    var i;\n    i = this.buildings.length;\n    sketch.save();\n    sketch.translate(this.x, (sketch.height - sketch.viewHeight) / 20 * this.layer);\n    while (i--) {\n      this.buildings[i].render(i);\n    }\n    return sketch.restore();\n  };\n  sketch.setup = function () {\n    var i, results;\n    i = 5;\n    results = [];\n    while (i--) {\n      results.push(skylines.push(new Skyline({\n        layer: i + 1,\n        width: {\n          min: (i + 1) * 15,\n          max: (i + 1) * 25\n        },\n        height: {\n          min: 180 - i * 35,\n          max: 350 - i * 40\n        },\n        speed: (i + 1) * 0.003,\n        color: colors[i] //'hsl( 208, ' + (i * 9 + 5) + '%, ' + (80 - i * 13) + '% )'\n      })));\n    }\n    return results;\n  };\n  sketch.clear = function () {\n    return sketch.clearRect(0, 0, sketch.width, sketch.height);\n  };\n  sketch.update = function () {\n    var i, results;\n    dt = sketch.dt < 0.1 ? 0.1 : sketch.dt / 16;\n    dt = dt > 5 ? 5 : dt;\n    i = skylines.length;\n    results = [];\n    while (i--) {\n      results.push(skylines[i].update(i));\n    }\n    return results;\n  };\n  sketch.draw = function () {\n    var i, results;\n    i = skylines.length;\n    results = [];\n    while (i--) {\n      results.push(skylines[i].render(i));\n    }\n    return results;\n  };\n\n\n}\n\nangular.module('app')\n  .service('DelijnService', DelijnService);\n\n/** @NgInject */\nfunction DelijnService($http) {\n  this.getNextBusses = function (busstop) {\n    return $http({\n      method: 'GET',\n      url: 'https://www.delijn.be/rise-api-core/haltes/doorkomstenditmoment/'+busstop+'/13'\n    })\n  };\n}\n\nangular.module('app')\n  .controller('SetupController', SetupController);\n\n/** @ngInject */\nfunction SetupController($log, AppConfig, ScreenConfigService, $interval, $state) {\n  var vm = this;\n\n  // Vars\n  vm.uiUrl = AppConfig.uiUrl;\n  vm.screenCode = ScreenConfigService.screenCode;\n  vm.screenName = null;\n  vm.countdown = 15;\n\n  var checkTimer;\n  var countdownTimer;\n\n  function init() {\n    $log.debug(\"SetupController loaded.\");\n\n    checkTimer = $interval(checkScreenExists, 5000);\n  }\n\n  function checkScreenExists () {\n    ScreenConfigService.getScreenConfig(function(err, config) {\n      if(config) {\n        $interval.cancel(checkTimer);\n        vm.screenName = config.name;\n        countdownTimer = $interval(function countdown() {\n          if(vm.countdown <= 0) {\n            $interval.cancel(countdownTimer);\n            $state.go('app');\n          }\n          vm.countdown--;\n        }, 1000);\n      }\n    });\n  }\n  init();\n}\n\nangular\n  .module('app')\n  .service('ApiService', ApiService);\n\n/** ngInject */\nfunction ApiService($http, $log, ScreenConfigService, AppConfig) {\n  var svc = this;\n\n  const options = {\n    headers: {\n      'PlanniScreenCode': ScreenConfigService.screenCode\n    }\n  };\n\n  svc.getAvailable = function () {\n    return $http.get(AppConfig.apiUrl + 'available', options);\n  }\n\n  svc.getMessages = function (eventId) {\n    return $http.get(AppConfig.apiUrl + 'messages', options);\n  }\n\n  svc.getScreenConfig = function () {\n    return $http.get(AppConfig.apiUrl + 'screen', options);\n  }\n\n}\n\nangular.module('app')\n  .controller('MessagesController', MessagesController);\n\n/** @NgInject */\nfunction MessagesController($log, ApiService, $rootScope) {\n\n  var vm = this;\n\n  vm.messages = [];\n\n  function _init() {\n    $log.debug(\"MessagesController loaded!\");\n\n    ApiService.getMessages().then(\n      function onSucces(response) {\n        // If no data is returned; next slide\n        if(! response.data.length) $rootScope.nextSlide();\n        vm.messages = response.data;\n      },\n      function onError(response) {\n        $log.error(\"Getting messages failed:\", response);\n        $rootScope.nextSlide();\n      }\n    );\n  }\n  _init();\n\n}\n\n/* Copyright (C) 2013 Justin Windle, http://soulwire.co.uk */\n!function(e,t){\"object\"==typeof exports?module.exports=t(e,e.document):\"function\"==typeof define&&define.amd?define(function(){return t(e,e.document)}):e.Sketch=t(e,e.document)}(\"undefined\"!=typeof window?window:this,function(e,t){\"use strict\";function n(e){return\"[object Array]\"==Object.prototype.toString.call(e)}function o(e){return\"function\"==typeof e}function r(e){return\"number\"==typeof e}function i(e){return\"string\"==typeof e}function u(e){return C[e]||String.fromCharCode(e)}function a(e,t,n){for(var o in t)!n&&o in e||(e[o]=t[o]);return e}function c(e,t){return function(){e.apply(t,arguments)}}function l(e){var t={};for(var n in e)\"webkitMovementX\"!==n&&\"webkitMovementY\"!==n&&(o(e[n])?t[n]=c(e[n],e):t[n]=e[n]);return t}function s(e){function t(t){o(t)&&t.apply(e,[].splice.call(arguments,1))}function n(e){for(_=0;_<ee.length;_++)B=ee[_],i(B)?S[(e?\"add\":\"remove\")+\"EventListener\"].call(S,B,N,!1):o(B)?N=B:S=B}function r(){I(A),A=R(r),K||(t(e.setup),K=o(e.setup)),U||(t(e.resize),U=o(e.resize)),e.running&&!q&&(e.dt=(z=+new Date)-e.now,e.millis+=e.dt,e.now=z,t(e.update),Z&&(e.retina&&(e.save(),e.autoclear&&e.scale(V,V)),e.autoclear&&e.clear()),t(e.draw),Z&&e.retina&&e.restore()),q=++q%e.interval}function c(){S=J?e.style:e.canvas,D=J?\"px\":\"\",Y=e.width,j=e.height,e.fullscreen&&(j=e.height=v.innerHeight,Y=e.width=v.innerWidth),e.retina&&Z&&V&&(S.style.height=j+\"px\",S.style.width=Y+\"px\",Y*=V,j*=V),S.height!==j&&(S.height=j+D),S.width!==Y&&(S.width=Y+D),Z&&!e.autoclear&&e.retina&&e.scale(V,V),K&&t(e.resize)}function s(e,t){return L=t.getBoundingClientRect(),e.x=e.pageX-L.left-(v.scrollX||v.pageXOffset),e.y=e.pageY-L.top-(v.scrollY||v.pageYOffset),e}function f(t,n){return s(t,e.element),n=n||{},n.ox=n.x||t.x,n.oy=n.y||t.y,n.x=t.x,n.y=t.y,n.dx=n.x-n.ox,n.dy=n.y-n.oy,n}function d(e){if(e.preventDefault(),G=l(e),G.originalEvent=e,G.touches)for(Q.length=G.touches.length,_=0;_<G.touches.length;_++)Q[_]=f(G.touches[_],Q[_]);else Q.length=0,Q[0]=f(G,$);return a($,Q[0],!0),G}function p(n){for(n=d(n),M=(X=ee.indexOf(W=n.type))-1,e.dragging=!!/down|start/.test(W)||!/up|end/.test(W)&&e.dragging;M;)i(ee[M])?t(e[ee[M--]],n):i(ee[X])?t(e[ee[X++]],n):M=0}function g(n){F=n.keyCode,H=\"keyup\"==n.type,te[F]=te[u(F)]=!H,t(e[n.type],n)}function m(n){e.autopause&&(\"blur\"==n.type?E:y)(),t(e[n.type],n)}function y(){e.now=+new Date,e.running=!0}function E(){e.running=!1}function k(){(e.running?E:y)()}function P(){Z&&e.clearRect(0,0,e.width*V,e.height*V)}function T(){O=e.element.parentNode,_=b.indexOf(e),O&&O.removeChild(e.element),~_&&b.splice(_,1),n(!1),E()}var A,N,S,O,L,_,D,z,B,G,W,F,H,M,X,Y,j,q=0,Q=[],U=!1,K=!1,V=v.devicePixelRatio||1,J=e.type==w,Z=e.type==h,$={x:0,y:0,ox:0,oy:0,dx:0,dy:0},ee=[e.eventTarget||e.element,p,\"mousedown\",\"touchstart\",p,\"mousemove\",\"touchmove\",p,\"mouseup\",\"touchend\",p,\"click\",p,\"mouseout\",p,\"mouseover\",x,g,\"keydown\",\"keyup\",v,m,\"focus\",\"blur\",c,\"resize\"],te={};for(F in C)te[C[F]]=!1;return a(e,{touches:Q,mouse:$,keys:te,dragging:!1,running:!1,millis:0,now:NaN,dt:NaN,destroy:T,toggle:k,clear:P,start:y,stop:E}),b.push(e),e.autostart&&y(),n(!0),c(),r(),e}for(var f,d,p=\"E LN10 LN2 LOG2E LOG10E PI SQRT1_2 SQRT2 abs acos asin atan ceil cos exp floor log round sin sqrt tan atan2 pow max min\".split(\" \"),g=\"__hasSketch\",m=Math,h=\"canvas\",y=\"webgl\",w=\"dom\",x=t,v=e,b=[],E={fullscreen:!0,autostart:!0,autoclear:!0,autopause:!0,container:x.body,interval:1,globals:!0,retina:!1,type:h},C={8:\"BACKSPACE\",9:\"TAB\",13:\"ENTER\",16:\"SHIFT\",27:\"ESCAPE\",32:\"SPACE\",37:\"LEFT\",38:\"UP\",39:\"RIGHT\",40:\"DOWN\"},k={CANVAS:h,WEB_GL:y,WEBGL:y,DOM:w,instances:b,install:function(e){if(!e[g]){for(var t=0;t<p.length;t++)e[p[t]]=m[p[t]];a(e,{TWO_PI:2*m.PI,HALF_PI:m.PI/2,QUARTER_PI:m.PI/4,random:function(e,t){return n(e)?e[~~(m.random()*e.length)]:(r(t)||(t=e||1,e=0),e+m.random()*(t-e))},lerp:function(e,t,n){return e+n*(t-e)},map:function(e,t,n,o,r){return(e-t)/(n-t)*(r-o)+o}}),e[g]=!0}},create:function(e){return e=a(e||{},E),e.globals&&k.install(self),f=e.element=e.element||x.createElement(e.type===w?\"div\":\"canvas\"),d=e.context=e.context||function(){switch(e.type){case h:return f.getContext(\"2d\",e);case y:return f.getContext(\"webgl\",e)||f.getContext(\"experimental-webgl\",e);case w:return f.canvas=f}}(),(e.container||x.body).appendChild(f),k.augment(d,e)},augment:function(e,t){return t=a(t||{},E),t.element=e.canvas||e,t.element.className+=\" sketch\",a(e,t,!0),s(e)}},P=[\"ms\",\"moz\",\"webkit\",\"o\"],T=self,A=0,N=\"AnimationFrame\",S=\"request\"+N,O=\"cancel\"+N,R=T[S],I=T[O],L=0;L<P.length&&!R;L++)R=T[P[L]+\"Request\"+N],I=T[P[L]+\"Cancel\"+N];return T[S]=R=R||function(e){var t=+new Date,n=m.max(0,16-(t-A)),o=setTimeout(function(){e(t+n)},n);return A=t+n,o},T[O]=I=I||function(e){clearTimeout(e)},k});\nangular\n  .module('app')\n  .service('ScreenConfigService', function ($http, AppConfig) {\n    var svc = this;\n\n    svc.screenCode = '123ABC';\n    svc.screenConfig = null;\n\n    const options = {\n      headers: {\n        'PlanniScreenCode': svc.screenCode\n      }\n    };\n\n    svc.getScreenConfig = function (callback) {\n      if(svc.screenConfig) return callback(null, svc.screenConfig);\n\n      $http.get(AppConfig.apiUrl + 'screen', options).then(function onSuccess(response) {\n        svc.screenConfig = response.data;\n        console.log(svc.screenConfig);\n        callback(null, svc.screenConfig);\n      }, function onError(response) {\n        callback(response);\n      });\n    }\n  });\n\nangular\n  .module('app')\n  .config(routesConfig);\n\n/** @ngInject */\nfunction routesConfig($stateProvider, $urlRouterProvider, $locationProvider) {\n  // $locationProvider.html5Mode(true).hashPrefix('!');\n  $urlRouterProvider.otherwise('/weather');\n\n  $stateProvider\n    .state('setup', {\n      url: '/setup',\n      templateUrl: 'app/setup/setup.html',\n      controller: 'SetupController as setup'\n    })\n    .state('app', {\n      url: '/',\n      template: '<ui-view/>',\n      redirectTo: 'app.weather',\n      controller: 'MainController as main'\n    })\n    .state('app.weather', {\n      url: 'weather',\n      templateUrl: 'app/weather/weather.html',\n      controller: 'WeatherController as weather'\n    })\n    .state('app.transport', {\n      url: 'transport',\n      templateUrl: 'app/transport/transport.html',\n      controller: 'TransportController as transport'\n    })\n    .state('app.messages', {\n      url: 'messages',\n      templateUrl: 'app/messages/messages.html',\n      controller: 'MessagesController as messages'\n    });\n}\n\nangular\n  .module('app')\n  .controller('MainController', MainController);\n\n/** @ngInject */\nfunction MainController($timeout, $state, $log, $rootScope, ApiService) {\n\n  // Variables\n  $rootScope.currentSlideId = 0;\n  $rootScope.slides = [];\n\n  $rootScope.createSlides = function (response) {\n    $rootScope.slides = [];\n    if(response.data.length) {\n      response.data.forEach(function(slideName) {\n        $rootScope.slides.push({\n          name: slideName,\n          duration: 6000\n        });\n      });\n    }\n  }\n\n  $rootScope.nextSlide = function () {\n\n    // Get available slides\n    ApiService.getAvailable().then($rootScope.createSlides);\n\n    // Cycle through slides normally\n    if($rootScope.slides.length) {\n      //$log.debug($rootScope.currentSlideId, $rootScope.slides);\n\n      $rootScope.currentSlideId = ($rootScope.currentSlideId + 1 >= $rootScope.slides.length ? 0 : $rootScope.currentSlideId + 1);\n\n      $state.go('app.' + $rootScope.slides[$rootScope.currentSlideId].name);\n      $timeout.cancel($rootScope.slideTimeout);\n      $rootScope.slideTimeout = $timeout($rootScope.nextSlide, $rootScope.slides[$rootScope.currentSlideId].duration);\n    } else {\n      $timeout.cancel($rootScope.slideTimeout);\n      $rootScope.slideTimeout = $timeout($rootScope.nextSlide, 1000);\n    }\n  };\n\n  function _init() {\n    $log.debug('MainController loaded!');\n\n    ApiService.getAvailable().then(function (response) {\n      $rootScope.createSlides(response);\n      $rootScope.nextSlide();\n    });\n  }\n  _init();\n}\n\nangular\n  .module('app')\n  .constant('AppConfig', {\n    apiUrl: 'http://planni-housekeeping-alexvanderbist.c9users.io/api/',\n    uiUrl: 'http://bit.do/planni/'\n  });\n\nangular.module(\"app\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/layout/layout.html\",\"<ui-view></ui-view>\");\n$templateCache.put(\"app/messages/messages.html\",\"<div class=\\\"slide slide-messages\\\" ng-show=\\\"messages.messages.length\\\">\\n  <div class=\\\"messages\\\">\\n    <aside class=\\\"note-wrap note-yellow\\\" ng-repeat=\\\"message in messages.messages\\\">\\n      <p>{{message.message}}</p>\\n      <span>{{message.signature}}</span>\\n    </aside>\\n    <!--note-big-->\\n  </div>\\n</div>\\n\");\n$templateCache.put(\"app/setup/setup.html\",\"<div class=\\\"slide slide-setup\\\">\\n  <div ng-hide=\\\"setup.screenName\\\">\\n    <h1>Hello, I\\'m a Planni Screen!</h1>\\n    <p class=\\\"lead\\\">\\n      Go to <strong>{{setup.uiUrl}}</strong> to configure me<br>\\n      and use the following code:<br>\\n      <span class=\\\"code\\\">{{setup.screenCode}}</span>\\n    </p>\\n  </div>\\n\\n  <div ng-show=\\\"setup.screenName\\\">\\n    <h1>{{setup.screenName}}</h1>\\n    <p class=\\\"lead\\\">We\\'re done here! Have fun using your Planni!</p>\\n    <p class=\\\"lead\\\">Get ready... {{setup.countdown}}</p>\\n  </div>\\n\\n  <img src=\\\"images/planni_char_white.svg\\\" class=\\\"planni-char\\\" alt=\\\"Planni\\\">\\n</div>\\n\");\n$templateCache.put(\"app/transport/transport.html\",\"<div class=\\\"slide slide-transport\\\">\\n\\n  <div class=\\\"content\\\" ng-show=\\\"transport.nextBusses[0]\\\">\\n    <h2>Volgende bus in</h2>\\n    <h1>{{transport.formatDepartureTime(transport.nextBusses[0].vertrekTijd)}} minuten</h1>\\n  </div>\\n\\n  <div class=\\\"content\\\" ng-show=\\\"transport.notice\\\">\\n    <h2>{{transport.notice}}</h2>\\n  </div>\\n\\n  <div class=\\\"schedule-ticker\\\">\\n    <h2 class=\\\"text-center\\\" ng-hide=\\\"transport.nextBusses.length\\\">Laden...</h2>\\n    <table class=\\\"table table-condensed\\\">\\n      <tr ng-repeat=\\\"bus in transport.nextBusses\\\">\\n        <td class=\\\"lijnNummer\\\">{{bus.lijnNummer}}</td>\\n        <td>{{bus.bestemming}}</td>\\n        <td class=\\\"vertrekTijd\\\">{{bus.vertrekTijd}}</td>\\n      </tr>\\n    </table>\\n  </div>\\n\\n  <img src=\\\"images/slides/transport/bus.png\\\" alt=\\\"Bus\\\" class=\\\"bus\\\">\\n  <div id=\\\"city-bg\\\"></div>\\n\\n</div>\\n\");\n$templateCache.put(\"app/weather/weather.html\",\"<div class=\\\"slide slide-weather\\\" ng-class=\\\"weather.time\\\">\\n\\n  <div class=\\\"content\\\">\\n    <h1>{{weather.weather.temp | number:1 }}°C, {{weather.weatherDescription}}</h1>\\n    <h2>Tomorrow {{weather.weatherForecast.main.temp | number:1 }}°C, {{weather.weatherForecast.weather[0].description}}</h2>\\n  </div>\\n\\n  <div class=\\\"content-bottom\\\">\\n    <h2>MIN {{weather.weather.temp_min}}°C | MAX {{weather.weather.temp_max}}°C | {{weather.weather.pressure}} PSI</h2>\\n  </div>\\n\\n  <div id=\\\"thermometer\\\" ng-click=\\\"weather.time = (weather.time === \\'day\\' ? \\'night\\' : \\'day\\')\\\">\\n    <span class=\\\"glass floating\\\">\\n      <span class=\\\"amount\\\" ng-style=\\\"weather.thermometerStyle\\\" style=\\\"height: 0%\\\"></span>\\n    </span>\\n    <div class=\\\"bulb floating\\\">\\n      <span class=\\\"red-circle\\\"></span>\\n      <span class=\\\"filler\\\">\\n          <span></span>\\n      </span>\\n    </div>\\n    <div class=\\\"shade\\\"></div>\\n  </div>\\n\\n  <div class=\\\"landscape\\\">\\n    <div class=\\\"moon\\\"></div>\\n    <div class=\\\"sun\\\"></div>\\n    <div class=\\\"hills\\\">\\n      <div></div>\\n      <div></div>\\n      <div></div>\\n      <div></div>\\n      <div></div>\\n    </div>\\n    <div class=\\\"trees\\\">\\n      <div><span></span></div>\\n      <div><span></span></div>\\n      <div><span></span></div>\\n      <div><span></span></div>\\n      <div><span></span></div>\\n      <div><span></span></div>\\n      <div><span></span></div>\\n      <div><span></span></div>\\n      <div><span></span></div>\\n      <div><span></span></div>\\n      <div><span></span></div>\\n      <div><span></span></div>\\n      <div><span></span></div>\\n      <div><span></span></div>\\n      <div><span></span></div>\\n      <div><span></span></div>\\n      <div><span></span></div>\\n      <div><span></span></div>\\n    </div>\\n  </div>\\n\\n  <canvas id=\\\"snow\\\"></canvas>\\n<!--\\n  <div class=\\\"family\\\">\\n\\n  </div>-->\\n</div>\\n\");}]);"]}