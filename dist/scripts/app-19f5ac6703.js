function WeatherController(e,t,n,i){function s(e,t,n){var i=(e-t)/(n-t)*100;return i+"%"}function r(){t.debug("WeatherController loaded."),i.getTodayWeather().then(function(e){a.temperature=e.data.main.temp,a.thermometerStyle={height:s(a.temperature,-10,35)}},function(e){t.error("Couldn't get weather from OpenWeatherService",e)})}var a=this;a.thermometerStyle={height:"0%"},a.time=(new Date).getHours()>20||(new Date).getHours()<8?"night":"day",r()}function OpenWeatherService(e,t,n){var i=this;i.getTodayWeather=function(){return n({method:"GET",url:"http://api.openweathermap.org/data/2.5/weather",params:{q:"Antwerp,BE",apikey:t.openWeatherApi.apiKey,units:"metric"}})}}function TransportController(e,t,n,i){function s(){t.debug("TransportController loaded!"),e.getNextBusses().then(function(e){p.nextBusses=e.data.lijnen},function(e){}),i.$on("$stateChangeStart",l.destroy)}var r,a,o,l,h,d,p=this;l=Sketch.create({container:document.getElementById("city-bg"),fullscreen:!1,width:800,height:400}),l.speed=120,l.viewHeight=l.height,h=[],o=1,d=["#e2e9f1","#bdceea","#96b3d3","#839fc4","#3e617f"],p.nextBusses=[],p.formatDepartureTime=function(e){return e?e.search("'")?e.replace("'",""):e:null},s(),r=function(e){return this.reset(e)},r.prototype.reset=function(e){return this.layer=e.layer,this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.color=e.color,this.slantedTop=0===floor(random(0,10)),this.slantedTopHeight=this.width/random(2,4),this.slantedTopDirection=0===round(random(0,1)),this.spireTop=0===floor(random(0,15)),this.spireTopWidth=random(.01*this.width,.07*this.width),this.spireTopHeight=random(10,20),this.antennaTop=!this.spireTop&&0===floor(random(0,10)),this.antennaTopWidth=this.layer/2,this.antennaTopHeight=random(5,20)},r.prototype.render=function(){if(l.fillStyle=l.strokeStyle=this.color,l.lineWidth=2,l.beginPath(),l.rect(this.x,this.y,this.width,this.height),l.fill(),l.stroke(),this.slantedTop&&(l.beginPath(),l.moveTo(this.x,this.y),l.lineTo(this.x+this.width,this.y),this.slantedTopDirection?l.lineTo(this.x+this.width,this.y-this.slantedTopHeight):l.lineTo(this.x,this.y-this.slantedTopHeight),l.closePath(),l.fill(),l.stroke()),this.spireTop&&(l.beginPath(),l.moveTo(this.x+this.width/2,this.y-this.spireTopHeight),l.lineTo(this.x+this.width/2+this.spireTopWidth,this.y),l.lineTo(this.x+this.width/2-this.spireTopWidth,this.y),l.closePath(),l.fill(),l.stroke()),this.antennaTop)return l.beginPath(),l.moveTo(this.x+this.width/2,this.y-this.antennaTopHeight),l.lineTo(this.x+this.width/2,this.y),l.lineWidth=this.antennaTopWidth,l.stroke()},a=function(e){return this.x=0,this.buildings=[],this.layer=e.layer,this.width={min:e.width.min,max:e.width.max},this.height={min:e.height.min,max:e.height.max},this.speed=e.speed,this.color=e.color,this.populate(),this},a.prototype.populate=function(){var e,t,n,i;for(i=0,n=[];i<=l.width+2*this.width.max;)t=round(random(this.width.min,this.width.max)),e=round(random(this.height.min,this.height.max)),this.buildings.push(new r({layer:this.layer,x:0===this.buildings.length?0:this.buildings[this.buildings.length-1].x+this.buildings[this.buildings.length-1].width,y:l.height-e,width:t,height:e,color:this.color})),n.push(i+=t);return n},a.prototype.update=function(){var e,t,n,i;if(this.x-=l.speed*this.speed*o,e=this.buildings[0],e.width+e.x+this.x<0)return i=round(random(this.width.min,this.width.max)),n=round(random(this.height.min,this.height.max)),t=this.buildings[this.buildings.length-1],e.reset({layer:this.layer,x:t.x+t.width,y:l.height-n,width:i,height:n,color:this.color}),this.buildings.push(this.buildings.shift())},a.prototype.render=function(){var e;for(e=this.buildings.length,l.save(),l.translate(this.x,(l.height-l.viewHeight)/20*this.layer);e--;)this.buildings[e].render(e);return l.restore()},l.setup=function(){var e,t;for(e=5,t=[];e--;)t.push(h.push(new a({layer:e+1,width:{min:15*(e+1),max:25*(e+1)},height:{min:180-35*e,max:350-40*e},speed:.003*(e+1),color:d[e]})));return t},l.clear=function(){return l.clearRect(0,0,l.width,l.height)},l.update=function(){var e,t;for(o=l.dt<.1?.1:l.dt/16,o=o>5?5:o,e=h.length,t=[];e--;)t.push(h[e].update(e));return t},l.draw=function(){var e,t;for(e=h.length,t=[];e--;)t.push(h[e].render(e));return t}}function DelijnService(e){this.getNextBusses=function(t){return e({method:"GET",url:"https://www.delijn.be/rise-api-core/haltes/doorkomstenditmoment/105458/13"})}}function ApiService(e,t){var n=this;const i="http://planni.app/api/";n.getMessages=function(t){return e.get(i+"messages")}}function MessagesController(e,t){function n(){e.log("MessagesController loaded!"),t.getMessages().then(function(t){e.debug(t),i.messages=t.data},function(t){e.error("Getting messages failed:",t)})}var i=this;i.messages=[],n()}function routesConfig(e,t,n){n.html5Mode(!0).hashPrefix("!"),t.otherwise("/"),e.state("app",{url:"/",template:"<ui-view/>",controller:"MainController as main"}).state("app.weather",{url:"weather",templateUrl:"app/weather/weather.html",controller:"WeatherController as weather"}).state("app.transport",{url:"transport",templateUrl:"app/transport/transport.html",controller:"TransportController as transport"}).state("app.messages",{url:"messages",templateUrl:"app/messages/messages.html",controller:"MessagesController as messages"})}function MainController(e,t,n){function i(){n.debug("MainController loaded!")}i()}WeatherController.$inject=["$document","$log","$timeout","OpenWeatherService"],OpenWeatherService.$inject=["$log","appConfig","$http"],routesConfig.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],MainController.$inject=["$timeout","$state","$log"],TransportController.$inject=["DelijnService","$log","$window","$rootScope"],DelijnService.$inject=["$http"],ApiService.$inject=["$http","$log"],MessagesController.$inject=["$log","ApiService"],angular.module("app",["ui.router"]),angular.module("app").controller("WeatherController",WeatherController),angular.module("app").service("OpenWeatherService",OpenWeatherService),angular.module("app").controller("TransportController",TransportController),angular.module("app").service("DelijnService",DelijnService),angular.module("app").service("ApiService",ApiService),angular.module("app").controller("MessagesController",MessagesController),/* Copyright (C) 2013 Justin Windle, http://soulwire.co.uk */
!function(e,t){"object"==typeof exports?module.exports=t(e,e.document):"function"==typeof define&&define.amd?define(function(){return t(e,e.document)}):e.Sketch=t(e,e.document)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function n(e){return"[object Array]"==Object.prototype.toString.call(e)}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function r(e){return"string"==typeof e}function a(e){return C[e]||String.fromCharCode(e)}function o(e,t,n){for(var i in t)!n&&i in e||(e[i]=t[i]);return e}function l(e,t){return function(){e.apply(t,arguments)}}function h(e){var t={};for(var n in e)"webkitMovementX"!==n&&"webkitMovementY"!==n&&(i(e[n])?t[n]=l(e[n],e):t[n]=e[n]);return t}function d(e){function t(t){i(t)&&t.apply(e,[].splice.call(arguments,1))}function n(e){for(B=0;B<ee.length;B++)N=ee[B],r(N)?P[(e?"add":"remove")+"EventListener"].call(P,N,j,!1):i(N)?j=N:P=N}function s(){M(k),k=E(s),Y||(t(e.setup),Y=i(e.setup)),X||(t(e.resize),X=i(e.resize)),e.running&&!q&&(e.dt=(H=+new Date)-e.now,e.millis+=e.dt,e.now=H,t(e.update),J&&(e.retina&&(e.save(),e.autoclear&&e.scale(K,K)),e.autoclear&&e.clear()),t(e.draw),J&&e.retina&&e.restore()),q=++q%e.interval}function l(){P=Q?e.style:e.canvas,O=Q?"px":"",U=e.width,V=e.height,e.fullscreen&&(V=e.height=x.innerHeight,U=e.width=x.innerWidth),e.retina&&J&&K&&(P.style.height=V+"px",P.style.width=U+"px",U*=K,V*=K),P.height!==V&&(P.height=V+O),P.width!==U&&(P.width=U+O),J&&!e.autoclear&&e.retina&&e.scale(K,K),Y&&t(e.resize)}function d(e,t){return D=t.getBoundingClientRect(),e.x=e.pageX-D.left-(x.scrollX||x.pageXOffset),e.y=e.pageY-D.top-(x.scrollY||x.pageYOffset),e}function p(t,n){return d(t,e.element),n=n||{},n.ox=n.x||t.x,n.oy=n.y||t.y,n.x=t.x,n.y=t.y,n.dx=n.x-n.ox,n.dy=n.y-n.oy,n}function u(e){if(e.preventDefault(),I=h(e),I.originalEvent=e,I.touches)for(F.length=I.touches.length,B=0;B<I.touches.length;B++)F[B]=p(I.touches[B],F[B]);else F.length=0,F[0]=p(I,Z);return o(Z,F[0],!0),I}function c(n){for(n=u(n),z=(_=ee.indexOf(L=n.type))-1,e.dragging=!!/down|start/.test(L)||!/up|end/.test(L)&&e.dragging;z;)r(ee[z])?t(e[ee[z--]],n):r(ee[_])?t(e[ee[_++]],n):z=0}function g(n){R=n.keyCode,G="keyup"==n.type,te[R]=te[a(R)]=!G,t(e[n.type],n)}function m(n){e.autopause&&("blur"==n.type?T:f)(),t(e[n.type],n)}function f(){e.now=+new Date,e.running=!0}function T(){e.running=!1}function S(){(e.running?T:f)()}function $(){J&&e.clearRect(0,0,e.width*K,e.height*K)}function W(){A=e.element.parentNode,B=b.indexOf(e),A&&A.removeChild(e.element),~B&&b.splice(B,1),n(!1),T()}var k,j,P,A,D,B,O,H,N,I,L,R,G,z,_,U,V,q=0,F=[],X=!1,Y=!1,K=x.devicePixelRatio||1,Q=e.type==w,J=e.type==v,Z={x:0,y:0,ox:0,oy:0,dx:0,dy:0},ee=[e.eventTarget||e.element,c,"mousedown","touchstart",c,"mousemove","touchmove",c,"mouseup","touchend",c,"click",c,"mouseout",c,"mouseover",y,g,"keydown","keyup",x,m,"focus","blur",l,"resize"],te={};for(R in C)te[C[R]]=!1;return o(e,{touches:F,mouse:Z,keys:te,dragging:!1,running:!1,millis:0,now:NaN,dt:NaN,destroy:W,toggle:S,clear:$,start:f,stop:T}),b.push(e),e.autostart&&f(),n(!0),l(),s(),e}for(var p,u,c="E LN10 LN2 LOG2E LOG10E PI SQRT1_2 SQRT2 abs acos asin atan ceil cos exp floor log round sin sqrt tan atan2 pow max min".split(" "),g="__hasSketch",m=Math,v="canvas",f="webgl",w="dom",y=t,x=e,b=[],T={fullscreen:!0,autostart:!0,autoclear:!0,autopause:!0,container:y.body,interval:1,globals:!0,retina:!1,type:v},C={8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",27:"ESCAPE",32:"SPACE",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN"},S={CANVAS:v,WEB_GL:f,WEBGL:f,DOM:w,instances:b,install:function(e){if(!e[g]){for(var t=0;t<c.length;t++)e[c[t]]=m[c[t]];o(e,{TWO_PI:2*m.PI,HALF_PI:m.PI/2,QUARTER_PI:m.PI/4,random:function(e,t){return n(e)?e[~~(m.random()*e.length)]:(s(t)||(t=e||1,e=0),e+m.random()*(t-e))},lerp:function(e,t,n){return e+n*(t-e)},map:function(e,t,n,i,s){return(e-t)/(n-t)*(s-i)+i}}),e[g]=!0}},create:function(e){return e=o(e||{},T),e.globals&&S.install(self),p=e.element=e.element||y.createElement(e.type===w?"div":"canvas"),u=e.context=e.context||function(){switch(e.type){case v:return p.getContext("2d",e);case f:return p.getContext("webgl",e)||p.getContext("experimental-webgl",e);case w:return p.canvas=p}}(),(e.container||y.body).appendChild(p),S.augment(u,e)},augment:function(e,t){return t=o(t||{},T),t.element=e.canvas||e,t.element.className+=" sketch",o(e,t,!0),d(e)}},$=["ms","moz","webkit","o"],W=self,k=0,j="AnimationFrame",P="request"+j,A="cancel"+j,E=W[P],M=W[A],D=0;D<$.length&&!E;D++)E=W[$[D]+"Request"+j],M=W[$[D]+"Cancel"+j];return W[P]=E=E||function(e){var t=+new Date,n=m.max(0,16-(t-k)),i=setTimeout(function(){e(t+n)},n);return k=t+n,i},W[A]=M=M||function(e){clearTimeout(e)},S}),angular.module("app").config(routesConfig),angular.module("app").controller("MainController",MainController),angular.module("app").constant("appConfig",{openWeatherApi:{apiKey:"5e82f8d95dafe191dfa259b75be0520c"}}),angular.module("app").run(["$templateCache",function(e){e.put("app/layout/layout.html","<ui-view></ui-view>"),e.put("app/messages/messages.html",'<div class="slide slide-messages">\n  <div class="messages">\n    <aside class="note-wrap note-yellow">\n      <p>Dit is zo #deep #wow.</p>\n      <span>Alex Vanderbist</span>\n    </aside>\n\n    <aside class="note-wrap note-blue">\n      <p>Longer note right here, I store...</p>\n      <span>Alex Vanderbist</span>\n    </aside>\n\n    <aside class="note-wrap note-yellow note-big">\n      <p>Longer note right here, I would use lorem ipsum but I\'m too lazy to go and copy it from the website :( Please\n        bring eggs and bread from the store...</p>\n      <span>Alex Vanderbist</span>\n    </aside>\n  </div>\n</div>\n'),e.put("app/transport/transport.html",'<div class="slide slide-transport">\n\n  <div class="content" ng-show="transport.nextBusses[0]">\n    <h2>Volgende bus in</h2>\n    <h1>{{transport.formatDepartureTime(transport.nextBusses[0].vertrekTijd)}} minuten</h1>\n  </div>\n\n  <div class="schedule-ticker">\n    <h2 class="text-center" ng-hide="transport.nextBusses.length">Laden...</h2>\n    <table class="table table-condensed">\n      <tr ng-repeat="bus in transport.nextBusses">\n        <td class="lijnNummer">{{bus.lijnNummer}}</td>\n        <td>{{bus.bestemming}}</td>\n        <td class="vertrekTijd">{{bus.vertrekTijd}}</td>\n      </tr>\n    </table>\n  </div>\n\n  <img src="images/slides/transport/bus.png" alt="Bus" class="bus">\n  <div id="city-bg"></div>\n\n</div>\n'),e.put("app/weather/weather.html",'<div class="slide slide-weather" ng-class="weather.time">\n\n  <div class="content">\n    <h1>25°C, regen</h1>\n    <h2>Morgen 20°C, sneeuw</h2>\n  </div>\n\n  <div id="thermometer" ng-click="weather.time = (weather.time === \'day\' ? \'night\' : \'day\')">\n    <span class="glass floating">\n      <span class="amount" ng-style="weather.thermometerStyle" style="height: 0%"></span>\n    </span>\n    <div class="bulb floating">\n      <span class="red-circle"></span>\n      <span class="filler">\n          <span></span>\n      </span>\n    </div>\n    <div class="shade"></div>\n  </div>\n\n  <div class="landscape">\n    <div class="moon"></div>\n    <div class="sun"></div>\n    <div class="hills">\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n    <div class="trees">\n      <div><span></span></div>\n      <div><span></span></div>\n      <div><span></span></div>\n      <div><span></span></div>\n      <div><span></span></div>\n      <div><span></span></div>\n      <div><span></span></div>\n      <div><span></span></div>\n      <div><span></span></div>\n      <div><span></span></div>\n      <div><span></span></div>\n      <div><span></span></div>\n      <div><span></span></div>\n      <div><span></span></div>\n      <div><span></span></div>\n      <div><span></span></div>\n      <div><span></span></div>\n      <div><span></span></div>\n    </div>\n  </div>\n\n  <canvas id="snow"></canvas>\n<!--\n  <div class="family">\n\n  </div>-->\n</div>\n')}]);
//# sourceMappingURL=../maps/scripts/app-19f5ac6703.js.map
